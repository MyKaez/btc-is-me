<h2>User Actions</h2>

<div *ngIf="user || (user$ | async) as user;else noUser">
  <ion-list>
    <ion-item>
      <ion-label>ID</ion-label>
      <ion-label>{{user.id}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label>Name</ion-label>
      <ion-label>{{user.name}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label>Status</ion-label>
      <ion-label>{{user.status}}</ion-label>
    </ion-item>
  </ion-list>

  <h3>Personal Session Data</h3>


  <div [ngSwitch]="session.status">
    <div *ngSwitchCase="'notStarted'">

      <h3>Not Started</h3>

    </div>
    <div *ngSwitchCase="'preparing'">

      <h3>Preparing</h3>

      <ion-item>
        <ion-input label="Hashrate" labelPlacement="stacked" placeholder="Enter Hashrate" [disabled]="true"
          [formControl]="hashRateControl"></ion-input>
        <ion-button fill="clear" slot="end" (click)="determine()">Determine Hashrate</ion-button>
      </ion-item>
      <ion-button fill="clear" (click)="ready()">Ready for session!</ion-button>

      <app-hash-list [session]="session" [user]="user" (hashFound)="hashFound($event)" #hashList></app-hash-list>
    </div>
    <div *ngSwitchCase="'started'">
      <h3>Started</h3>

      <app-hash-list [session]="session" [user]="user" (hashFound)="hashFound($event)" #hashList></app-hash-list>
    </div>
    <div *ngSwitchCase="'stopped'">

      <h3>Stopped</h3>

    </div>
  </div>

</div>
<ng-template #noUser>
  <div *ngIf="loading$ | async;else enterData">
    Loading...
  </div>
  <ng-template #enterData>
    Please register as user

    <ion-item>
      <ion-input label="User Name" labelPlacement="stacked" placeholder="Enter user name"
        [formControl]="userNameControl"></ion-input>
      <ion-button fill="clear" slot="end" (click)="registerUser()"
        [disabled]="userNameControl.invalid">Register</ion-button>
    </ion-item>

  </ng-template>
</ng-template>